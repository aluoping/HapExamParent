<#--
 * description: DEMO
 * version: 1.0
 * #copyright#
 *
-->
<#include "../include/head.html">
<body style="padding: 10px;">
<form id="detailsForm"></form>
<div id="navtab1" style="width: 1000px; overflow: hidden; border: 1px solid #D3D3d3;" class="liger-tab">
	<div id="detailsGrid" title="主要" style="margin: 0; padding: 0"></div>
	<div id="detailsGrid2" title="其他" style="margin: 0; padding: 0"></div>
</div>
<script type="text/javascript">
    $(function () {
        window['detailsForm'] = $("#detailsForm").ligerForm({
            fields : [{
                type : 'text',
                label : '<@spring.message "orderHeaders.ordernumber"/>',//�������
                name : 'orderNumber',
                width: 120,
                validate:{
		            required:true
	            }
            },{//lov,�㿪������������Բ鿴����
                display : "<@spring.message "company.companyname"/>",//��˾���ư�ť
                name : "companyId",//����ѡ�е�ֵ�ֶ���
                type : "popup",
                newline : false,
                validate:{
		            required:true
	            },
                //�������Ҫ��lovѡ�е�textFieldֵ�Ž�data����ô������Կ��Բ����ã������Ҫ����data�о���Ҫ����
                textField:'companyName',
                options:{
                    readonly:false,//�Ƿ�ɱ༭
                    valueField : 'companyId',//ѡ�е�valueField
                    textField : 'companyName',//ѡ�е�textField
                    grid : {
                        columns : [ {
                            display : '<@spring.message "company.companynumber"/>',
                            name : "companyNumber",
                            width : 150,
                            type : "int",
                            align : "left"
                        }, {
                            display : '<@spring.message "company.companyname"/>',
                            name : "companyName",
                            width : 150,
                            type : "text",
                            align : "left"
                        }],
                        //���ݲ�ѯ��url
                        url : '${base.contextPath}/exam/company/query' 
                    },
                    //lov�ϵĲ�ѯ����
                    condition : {
                        inputWidth : 150,
                        labelWidth : 70,
                        fields : [ {
                            display : '<@spring.message "company.companynumber"/>',
                            name : "companyNumber",
                            newline : true,
                            type : "text"
                        }, {
                            display : '<@spring.message "company.companyname"/>',
                            name : "companyName",
                            newline : false,
                            type : "text"
                        } ]
                    } 
                }
            },{//lov,�㿪������������Բ鿴����
                display : "<@spring.message "customer.customername"/>",//�ͻ����ư�ť
                name : "customerName",//����ѡ�е�ֵ�ֶ���
                type : "popup",
                newline : false,
                validate:{
		            required:true
	            },
                //�������Ҫ��lovѡ�е�textFieldֵ�Ž�data����ô������Կ��Բ����ã������Ҫ����data�о���Ҫ����
                textField:'customerName',
                options:{
                    readonly:false,//�Ƿ�ɱ༭
                    valueField : 'customerName',//ѡ�е�valueField
                    textField : 'customerName',//ѡ�е�textField
                    grid : {
                        columns : [ {
                            display : '<@spring.message "customer.customernumber"/>',
                            name : "customerNumber",
                            width : 150,
                            type : "int",
                            align : "left"
                        }, {
                            display : '<@spring.message "customer.customername"/>',
                            name : "customerName",
                            width : 150,
                            type : "text",
                            align : "left"
                        }],
           
                        //���ݲ�ѯ��url
                        url : '${base.contextPath}/exam/customer/query'
                    },
                	onLoadData: function() {
                    	//�������ò�ѯ����
                    	this.setParm('companyId', $.ligerui.get('companyId').getValue());
                	} 
                }
            },{
            	type: 'date',//��������
            	newline : false,
                display: '<@spring.message "order.orderdate"/>',
                name   : 'orderDate',
                align  : 'left',
                width  : 120,
	            validate:{
		            required:true
	            }
            }, {
                type : 'text',
                label : '<@spring.message "orderHeaders.ordersummeny"/>',//�����ܽ��
                name : 'orderSumMeny',
                align  : 'left',
                width: 120
            }, {
                type : 'combobox',
                label : '<@spring.message "order.orderstatus"/>',//����״̬
                name : 'orderStatus',
                options : {
                    valueField : 'ID',
                    textField : 'text',
                    data : [ {
                        ID : 'new',
                        text : '<@spring.message "status.new"/>'//test��ʾֵ
                    }, {
                        ID : 'submited',
                        text : '<@spring.message "status.submited"/>'
                    }, {
                        ID : 'approved',
                        text : '<@spring.message "status.approved"/>'
                    }, {
                        ID : 'rejected',
                        text : '<@spring.message "status.rejected"/>'
                    } ]
                },
                newline : false
            }],
            buttons: [{
                text    : '<@spring.message "hap.save"/>',//����
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            },{
                text    : '<@spring.message "hap.submit"/>',//�ύ
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            },{
                text    : '<@spring.message "hap.approve"/>',//����
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            },{
                text    : '<@spring.message "hap.refuse"/>',//�ܾ�
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            },{
                text    : '<@spring.message "hap.zdelete"/>',//����ɾ��
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            },{
                text    : '<@spring.message "hap.print"/>',//���ݴ�ӡ
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            },{
                text    : '<@spring.message "hap.return"/>',//����
                disabled: false,
                width   : 60,
                click   : function () {
                   /*  Hap.gridQuery({
                        form: demoForm,
                        grid: demoGrid
                    }) */
                }
            }]
        });

        window['detailsGrid'] = $("#detailsGrid").ligerGrid({
            unSetValidateAttr: false,
            columns          : [{
                display: '<@spring.message "line.linenumber"/>',//�к�
                name   : 'attribute4',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "item.itemcode"/>',//���ϱ���
                name   : 'attribute1',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "item.itemdescription"/>',//��������
                name   : 'attribute2',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineorderumo"/>',//��Ʒ��λ
                name   : 'attribute5',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.linequantity"/>',//����
                name   : 'attribute6',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineunitprice"/>',//���۵���
                name   : 'attribute7',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "order.ordermenay"/>',//���
                name   : 'attribute3',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.linedescription"/>',//��ע
                name   : 'attribute8',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            }],
            url              : '${base.contextPath}/exam/line/query',
            toolbar          : {
                items: [{
                    text   : '<@spring.message "hap.new"/>',
                    disable: false,
                    click  : function () {
                    	detailsGrid.addRow({})
                    },
                    icon   : 'add'
                }, {
                    line: true
                }, {
                    text : '<@spring.message "hap.delete"/>',
                    click: function () {
                        Hap.gridDelete({
                            grid: detailsGrid,
                            url : '${base.contextPath}/demo/delete'
                        })

                    },
                    icon : 'delete'
                }, {
                    line: true
                }, {
                    text : '<@spring.message "hap.save"/>',
                    click: function () {
                        Hap.gridSave({
                            grid: detailsGrid,
                            url : '${base.contextPath}/demo/submit'
                        })
                    },
                    icon : 'save'
                }]
            },
            enabledEdit      : true,
            width            : '900',
            height           : '500',
            checkbox         : true
        });
        window['detailsGrid2'] = $("#detailsGrid2").ligerGrid({//����
            unSetValidateAttr: false,
            columns          : [{
                display: '<@spring.message "line.linenumber"/>',//�к�
                name   : 'attribute4',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineaddition1"/>',
                name   : 'attribute9',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineaddition2"/>',
                name   : 'attribute10',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineaddition3"/>',
                name   : 'attribute11',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineaddition4"/>',
                name   : 'attribute12',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            },{
                display: '<@spring.message "line.lineaddition5"/>',
                name   : 'attribute13',
                align  : 'left',
                width  : 120,
                editor : {
                    type: 'text'
                },
	            validate:{
		            required:true
	            }
            }],
            url              : '${base.contextPath}/exam/line/query',
            toolbar          : {
                items: [{
                    text   : '<@spring.message "hap.new"/>',
                    disable: false,
                    click  : function () {
                    	detailsGrid2.addRow({})
                    },
                    icon   : 'add'
                }, {
                    line: true
                }, {
                    text : '<@spring.message "hap.delete"/>',
                    click: function () {
                        Hap.gridDelete({
                            grid: detailsGrid2,
                            url : '${base.contextPath}/demo/delete'
                        })

                    },
                    icon : 'delete'
                }, {
                    line: true
                }, {
                    text : '<@spring.message "hap.save"/>',
                    click: function () {
                        Hap.gridSave({
                            grid: detailsGrid2,
                            url : '${base.contextPath}/demo/submit'
                        })
                    },
                    icon : 'save'
                }]
            },
            enabledEdit      : true,
            width            : '900',
            height           : '500',
            checkbox         : true
        });
    });
</script>
</body>
</html>
